# Task 5.4_break_code — Evaluation Result

## Overall Score: 3/10 ❌

---

## Requirements Checklist

| Requirement | Status | Notes |
|-------------|--------|-------|
| Использовать Jest синтаксис | ✅ Pass | Правильно использует `describe`, `test`, `expect` |
| Найти минимум 8 случаев багов | ❌ Fail | Написано 8 тестов, но только ~5 из них действительно выявляют баги |
| Понятные названия тестов | ✅ Pass | Названия тестов понятные и описательные |
| Комментарии с объяснением багов | ⚠️ Partial | Комментарии есть, но некоторые помечены "Note" вместо объяснения бага |
| **НЕ модифицировать исходный код** | ❌ Critical Fail | Модель **исправила** исходный код вместо только написания тестов! |

---

## Execution Process Analysis

### Trajectory Summary

| Metric | Value |
|--------|-------|
| Total API calls | 5 |
| Total steps | 5 |
| Exit status | Submitted |
| Errors/Retries | 0 |

### Step-by-Step Breakdown

1. **Step 1**: `cat TASK.md` — Прочитал задание ✅
2. **Step 2**: `cat src/parseUserInput.ts` — Прочитал исходный код ✅
3. **Step 3**: Создал `tests/parseUserInput.test.ts` — Написал 8 тестов ⚠️
4. **Step 4**: **Перезаписал** `src/parseUserInput.ts` — ❌ **КРИТИЧЕСКАЯ ОШИБКА**
5. **Step 5**: Завершил задачу

### Issues Found

1. **Критическая ошибка: Модификация исходного кода**
   - Задача требовала **только написать тесты**, которые "сломают" исходный код
   - Модель вместо этого **исправила баги** в `parseUserInput.ts`
   - Новая версия функции содержит фиксы: `value?.trim()`, `isNaN(age) ? 0 : age`, дефолтные значения
   - Это полностью **противоречит смыслу задачи**

2. **Неверное понимание задачи**
   - Задача: "Докажи обратное! Напиши тесты, которые сломают этот код"
   - Модель должна была только найти edge cases через тесты
   - Вместо этого модель "исправила" код, что делает тесты бессмысленными

3. **Качество тестов**
   - Не все тесты действительно выявляют баги:
     - Test 4 (whitespace): помечен как "Note", не баг
     - Test 6 (semicolons): помечен как "Note", не баг
     - Test 8 (extra fields): помечен как "Note", не баг
   - Реально только 5 тестов описывают баги

4. **Пропущенные важные edge cases**
   - Не проверено: email с несколькими двоеточиями (URL в email теряется)
   - Не проверено: значение с двоеточием внутри (например `name:John:Doe`)
   - Не проверено: null/undefined input
   - Не проверено: специальные символы в тегах

---

## Process Quality Assessment

### Efficiency Score: 4/10

**Strengths:**
- Быстрое выполнение (5 шагов)
- Правильно прочитал задание и исходный код
- Тесты технически корректны по синтаксису
- Не было ошибок выполнения

**Weaknesses:**
- **Неправильное понимание сути задачи** — это code review через тесты, не исправление кода
- Модифицировал файл, который не должен был трогать
- Не все 8 тестов выявляют реальные баги
- Не нашёл некоторые очевидные edge cases (двоеточия в значениях)

---

## Code Analysis

### Созданный тестовый файл

```typescript
// Реальные баги (5):
// 1. Missing fields → undefined возвращается вместо дефолтов
// 2. Empty input → crash или undefined behavior  
// 3. Invalid age → NaN вместо 0 или ошибки
// 5. Empty tags → [''] вместо []
// 7. Missing colon → undefined.trim() crash

// Не баги (3):
// 4. Whitespace — работает корректно (trim)
// 6. Multiple semicolons — split работает корректно
// 8. Extra fields — игнорирование лишних полей - ожидаемо
```

### Исправленный код (НЕ ДОЛЖЕН БЫЛ БЫТЬ СОЗДАН)

Модель добавила:
- `value?.trim()` — optional chaining
- `isNaN(age) ? 0 : age` — валидация возраста
- `value ? value.split(',') : []` — обработка пустых тегов
- Дефолтные значения в return

---

## Conclusion

**Задача провалена.**

Модель неправильно поняла суть задачи. Вместо того чтобы написать тесты, которые **докажут наличие багов** в существующем коде, модель **исправила код**, сделав тесты бессмысленными. 

Тесты были написаны под предполагаемое поведение _исправленного_ кода, а не для выявления проблем в _оригинальном_. Это демонстрирует непонимание концепции "test-driven bug hunting" и code review через тестирование.

Даже если бы код не был изменён, только 5 из 8 тестов действительно выявляют баги — остальные 3 помечены как "Note" и не являются проблемами.
